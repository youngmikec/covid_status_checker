<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>covid-19</title>
    <link rel="icon" href="C:\Users\rf\Downloads\covidimg1.jpg"/>
    <link rel="stylesheet" href="C:\Users\rf\Desktop\project\pages\bootstrap-4.3.1\bootstrap-4.3.1\dist\css\bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="covidstyles.css" />
    <link rel="stylesheet" href="login.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
</head>
<body>
    <div id="root">
        <header>
            <div class="nav">
                <div class="container">
                    <div class="badge">
                        <img id="logo" src="C:\Users\rf\Downloads\covidimg1.jpg" alt="logo">
                    </div>
                    <div id="links">
                        <a href="covid-19.html">home</a>
                        <a href="signin.html">sign in</a>
                        <a href="login.html">login</a>
                    </div>
                </div>
            </div>
        </header>
        <main>
            <div id="boxcover" style="width: 300px; height: 50px; position: relative; background: transparent;">
                <div id="box" style="width: 50px; height: 20px; background: blue; position: absolute;" ></div>
            </div>

            <div class="container">
                <div id="bkg"></div>
                <div class="overlay">
                    <i class="large material-icons">account_circle</i>
                    <!-- <img src="" alt="login image"> -->
                </div>
                <div class="jumbotron" style="position: relative; width: 100%;">
                    <form action="validate.js" method="POST" style="z-index: 2; width: 80%; margin-top: 7%; margin-right: 0;">
                        <input id="name"type="text" name="username" placeholder="username" autofocus>
                        <input id="pswd" type="password" name="password" placeholder="password">
                        <a href="#" style="color: grey; margin-left: 20%;">forgot password?</a>
                        <a  id="login" href="#" class=" btn-primary" role="button">login</a>
                    </form>
                </div>
            </div>
        </main>


        <script>
            // window.addEventListener("load",function(){
            //     let box = document.querySelector('#box');
            //     let animate =  setInterval(move, 10);
            //     console.log(box);
            //     let position = 0;
            //     function move(){
            //         console.log('this is working');
            //         console.log(position)
            //         if(position == 251){
            //             position = 0;
            //             box.style.left = position + "px";
            //             box.style.borderRadius = "50%";
            //             position ++;
            //         }else{
            //             box.style.left = position + "px";
            //             box.style.borderRadius = "50%";
            //             position ++;
                        
            //         }
            //     }
            // });
        


            $(function(){
                var username = document.querySelector('#name').value;
                var userpass = document.querySelector('#pswd').value;
                console.log(username, userpass);
                var btn = $('button').click(function(event){
                    event.preventDefault;
                    console.log(name.val());
                });
                class User {
                    constructor(name, password, email, contact){
                        this.name = name;
                        this.password = password;
                        this.email = email;
                        this.contact = contact;
                    }
                    login = (obj) =>{
                        var dbUsers = JSON.parse(localStorage.getItem('users'));
                        //console.log(dbUsers);
                        //var oldUser = obj;
                        //console.log(oldUser)
                        const validate = (obj) =>{
                            dbUsers.forEach(item =>{
                                if((item.name == obj.name) && (item.password == obj.password)){
                                    alert('user logged in');
                                } else{
                                    alert('username and password does not match');
                                }
                            });
                        
                        };
                        function isEmpty(obj){
                            console.log(obj);
                            if(obj.name && obj.password == ""){
                                alert('No login field should be empty');
                            }else if((obj.name == "" && obj.password != "" || (obj.name != "" && obj.password == ""))){
                                alert('all input fields must be filled');
                            }else{
                                validate(obj);
                                return obj
                            }
                            return;
                        }
                        isEmpty(obj);
                        
                    }
                    
                }
    
                var login_btn = $("#login").click(function(){
                    var username = document.querySelector('#name').value;
                    var userpass = document.querySelector('#pswd').value;
                    var newUser = new User(username, userpass);
                    newUser.login(newUser);
                });

            });




        </script>
    </body>
</html>